# Pod Definition
apiVersion: v1
kind: Pod
metadata:
  name: service-catalog-apiserver
  labels:
    app: apiserver
spec:
  containers:
  - name: apiserver
    image: apiserver
    imagePullPolicy: IfNotPresent
    args: 
    - --etcd-servers
    - http://localhost:2379
    - -v
    - "10"
    ports:
    - containerPort: 6443
  # bring our own etcd until we can attach to core
  - name: etcd
    image: quay.io/coreos/etcd:v3.0.17
---
# this exposes the apiserver on a specific port
#
# not sure why I have to repeat myself so many times
apiVersion: v1
kind: Service
metadata:
  name: service-catalog-apiserver
spec:
  selector:
    app: apiserver
  type: NodePort
  ports:
  - protocol: TCP
    port: 30000
    nodePort: 30000
    targetPort: 6443

